<html>
<head>
  <title>CRM Database Tables</title>
  <style>
    body { background: #fff; color: #000; font-family: Arial, sans-serif; padding: 2rem; }
    h2 { margin-top: 2.5rem; color: #000; }
    table { border-collapse: collapse; width: 100%; margin-bottom: 2rem; background: #fff; color: #000; border-radius: 0; box-shadow: none; }
    th, td { border: 1px solid #222; padding: 0.7rem 1rem; text-align: left; }
    th { background: #fff; color: #000; font-weight: bold; }
    tr:nth-child(even) { background: #f5f5f5; }
    caption { caption-side: top; font-size: 1.2rem; margin-bottom: 0.5rem; color: #000; font-weight: bold; }
    .download-btn { background: #fff; color: #000; border: 1px solid #222; padding: 0.4rem 1.2rem; font-size: 1rem; cursor: pointer; margin-bottom: 1rem; margin-top: 0.5rem; }
    .download-btn:hover { background: #f5f5f5; }
  </style>
  <script>
    function downloadTableAsCSV(tableId, fileName) {
      var table = document.getElementById(tableId);
      var rows = Array.from(table.rows);
      var csv = rows.map(row => Array.from(row.cells).map(cell => '"' + cell.innerText.replace(/"/g, '""') + '"').join(",")).join("\n");
      var blob = new Blob([csv], { type: 'text/csv' });
      var link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = fileName;
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    }
  </script>
</head>
<body>
  <h1>CRM Database Table Structure</h1>

  <h2>Users</h2>
  <button class="download-btn" onclick="downloadTableAsCSV('users-table', 'users.csv')">Download Users Table (CSV)</button>
  <table id="users-table">
    <caption>Users</caption>
    <tr><th>Type</th><th>Field</th><th>Key</th><th>Description</th></tr>
    <tr><td>UUID</td><td>_id</td><td>PK</td><td>Unique user ID</td></tr>
    <tr><td>VARCHAR</td><td>name</td><td></td><td>User's name</td></tr>
    <tr><td>VARCHAR</td><td>email</td><td>UK</td><td>User's email (unique)</td></tr>
    <tr><td>VARCHAR</td><td>password</td><td></td><td>Hashed password</td></tr>
    <tr><td>VARCHAR</td><td>avatar</td><td></td><td>Profile image URL</td></tr>
    <tr><td>VARCHAR</td><td>role</td><td></td><td>User role (admin, user)</td></tr>
    <tr><td>JSON</td><td>settings</td><td></td><td>User settings (darkMode, notifications)</td></tr>
    <tr><td>VARCHAR</td><td>resetToken</td><td></td><td>Password reset token</td></tr>
    <tr><td>DATETIME</td><td>resetTokenExpiry</td><td></td><td>Token expiry time</td></tr>
    <tr><td>VARCHAR</td><td>otp</td><td></td><td>OTP for password reset</td></tr>
    <tr><td>DATETIME</td><td>otpExpiry</td><td></td><td>OTP expiry time</td></tr>
    <tr><td>DATETIME</td><td>createdAt</td><td></td><td>When the user was created</td></tr>
  </table>

  <h2>Customers</h2>
  <button class="download-btn" onclick="downloadTableAsCSV('customers-table', 'customers.csv')">Download Customers Table (CSV)</button>
  <table id="customers-table">
    <caption>Customers</caption>
    <tr><th>Type</th><th>Field</th><th>Key</th><th>Description</th></tr>
    <tr><td>UUID</td><td>_id</td><td>PK</td><td>Unique customer ID</td></tr>
    <tr><td>VARCHAR</td><td>name</td><td></td><td>Customer name</td></tr>
    <tr><td>VARCHAR</td><td>email</td><td>UK</td><td>Customer email (unique)</td></tr>
    <tr><td>VARCHAR</td><td>phone</td><td></td><td>Phone number</td></tr>
    <tr><td>VARCHAR</td><td>company</td><td></td><td>Company name</td></tr>
    <tr><td>VARCHAR</td><td>status</td><td></td><td>Status (active, inactive, lead)</td></tr>
    <tr><td>VARCHAR</td><td>industry</td><td></td><td>Industry type</td></tr>
    <tr><td>VARCHAR</td><td>avatar</td><td></td><td>Avatar image URL</td></tr>
    <tr><td>DATETIME</td><td>lastContact</td><td></td><td>Last contact date</td></tr>
    <tr><td>DATETIME</td><td>createdAt</td><td></td><td>When the customer was created</td></tr>
  </table>

  <h2>Projects</h2>
  <button class="download-btn" onclick="downloadTableAsCSV('projects-table', 'projects.csv')">Download Projects Table (CSV)</button>
  <table id="projects-table">
    <caption>Projects</caption>
    <tr><th>Type</th><th>Field</th><th>Key</th><th>Description</th></tr>
    <tr><td>UUID</td><td>_id</td><td>PK</td><td>Unique project ID</td></tr>
    <tr><td>UUID</td><td>customerId</td><td>FK</td><td>Linked customer ID</td></tr>
    <tr><td>VARCHAR</td><td>name</td><td></td><td>Project name</td></tr>
    <tr><td>VARCHAR</td><td>status</td><td></td><td>Status (proposal, in-progress, completed, on-hold)</td></tr>
    <tr><td>DATETIME</td><td>startDate</td><td></td><td>Project start date</td></tr>
    <tr><td>DATETIME</td><td>endDate</td><td></td><td>Project end date</td></tr>
    <tr><td>NUMBER</td><td>value</td><td></td><td>Project value</td></tr>
    <tr><td>NUMBER</td><td>progress</td><td></td><td>Completion percentage</td></tr>
    <tr><td>DATETIME</td><td>createdAt</td><td></td><td>When the project was created</td></tr>
  </table>

  <h2>Tasks</h2>
  <button class="download-btn" onclick="downloadTableAsCSV('tasks-table', 'tasks.csv')">Download Tasks Table (CSV)</button>
  <table id="tasks-table">
    <caption>Tasks</caption>
    <tr><th>Type</th><th>Field</th><th>Key</th><th>Description</th></tr>
    <tr><td>UUID</td><td>_id</td><td>PK</td><td>Unique task ID</td></tr>
    <tr><td>VARCHAR</td><td>title</td><td></td><td>Task title</td></tr>
    <tr><td>VARCHAR</td><td>description</td><td></td><td>Task description</td></tr>
    <tr><td>VARCHAR</td><td>status</td><td></td><td>Status (todo, in-progress, completed)</td></tr>
    <tr><td>DATETIME</td><td>dueDate</td><td></td><td>Due date</td></tr>
    <tr><td>UUID</td><td>assignedTo</td><td>FK</td><td>Assigned user ID</td></tr>
    <tr><td>UUID</td><td>customerId</td><td>FK</td><td>Linked customer ID</td></tr>
    <tr><td>UUID</td><td>projectId</td><td>FK</td><td>Linked project ID</td></tr>
    <tr><td>VARCHAR</td><td>priority</td><td></td><td>Priority (low, medium, high)</td></tr>
    <tr><td>DATETIME</td><td>createdAt</td><td></td><td>When the task was created</td></tr>
  </table>

  <h2>Activities</h2>
  <button class="download-btn" onclick="downloadTableAsCSV('activities-table', 'activities.csv')">Download Activities Table (CSV)</button>
  <table id="activities-table">
    <caption>Activities</caption>
    <tr><th>Type</th><th>Field</th><th>Key</th><th>Description</th></tr>
    <tr><td>UUID</td><td>_id</td><td>PK</td><td>Unique activity ID</td></tr>
    <tr><td>UUID</td><td>customerId</td><td>FK</td><td>Linked customer ID</td></tr>
    <tr><td>VARCHAR</td><td>type</td><td></td><td>Activity type (call, email, meeting, note)</td></tr>
    <tr><td>VARCHAR</td><td>description</td><td></td><td>Activity description</td></tr>
    <tr><td>DATETIME</td><td>date</td><td></td><td>Activity date</td></tr>
    <tr><td>DATETIME</td><td>createdAt</td><td></td><td>When the activity was created</td></tr>
  </table>

  <h2>Events</h2>
  <button class="download-btn" onclick="downloadTableAsCSV('events-table', 'events.csv')">Download Events Table (CSV)</button>
  <table id="events-table">
    <caption>Events</caption>
    <tr><th>Type</th><th>Field</th><th>Key</th><th>Description</th></tr>
    <tr><td>UUID</td><td>_id</td><td>PK</td><td>Unique event ID</td></tr>
    <tr><td>VARCHAR</td><td>title</td><td></td><td>Event title</td></tr>
    <tr><td>DATETIME</td><td>dateTime</td><td></td><td>Event date/time</td></tr>
    <tr><td>VARCHAR</td><td>description</td><td></td><td>Event description</td></tr>
    <tr><td>DATETIME</td><td>createdAt</td><td></td><td>When the event was created</td></tr>
  </table>
</body>
</html>
