<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Figure 4.1 System Architecture Diagram - CRM Project</title>
    <style>
        body { background: #222; color: #fff; font-family: Arial, sans-serif; }
        .diagram-container { background: #222; padding: 24px; }
        .diagram-svg { background: #333; border-radius: 8px; box-shadow: 0 2px 12px #0006; }
        .caption { text-align: center; margin-top: 16px; font-size: 1.3rem; font-family: serif; }
    </style>
</head>
<body>
    <div class="diagram-container">
        <svg class="diagram-svg" width="900" height="300">
            <!-- Users & External Systems -->
            <rect x="20" y="200" width="120" height="40" fill="#cfe2f3" stroke="#888" />
            <text x="80" y="225" text-anchor="middle" font-size="15" fill="#222">CRM User</text>

            <rect x="160" y="200" width="120" height="40" fill="#f9cb9c" stroke="#888" />
            <text x="220" y="225" text-anchor="middle" font-size="15" fill="#222">Service Provider</text>

            <!-- CRM System -->
            <rect x="80" y="60" width="320" height="60" fill="#b7e1cd" stroke="#888" />
            <text x="240" y="90" text-anchor="middle" font-size="15" fill="#222">React Frontend - Web Dashboard</text>

            <rect x="420" y="60" width="220" height="60" fill="#f4cccc" stroke="#888" />
            <text x="530" y="90" text-anchor="middle" font-size="15" fill="#222">Backend Server - Node.js/Express</text>

            <rect x="670" y="60" width="90" height="60" fill="#ffe599" stroke="#888" />
            <text x="715" y="90" text-anchor="middle" font-size="15" fill="#222">MongoDB</text>

            <rect x="780" y="20" width="90" height="40" fill="#d9ead3" stroke="#888" />
            <text x="825" y="45" text-anchor="middle" font-size="15" fill="#222">Email Server</text>

            <!-- Arrows -->
            <line x1="80" y1="200" x2="240" y2="120" stroke="#fff" stroke-width="2" marker-end="url(#arrow)" />
            <line x1="240" y1="120" x2="240" y2="120" stroke="#fff" stroke-width="2" />
            <line x1="400" y1="90" x2="420" y2="90" stroke="#fff" stroke-width="2" marker-end="url(#arrow)" />
            <line x1="640" y1="90" x2="670" y2="90" stroke="#fff" stroke-width="2" marker-end="url(#arrow)" />
            <line x1="760" y1="90" x2="780" y2="40" stroke="#fff" stroke-width="2" marker-end="url(#arrow)" />
            <line x1="530" y1="120" x2="220" y2="200" stroke="#fff" stroke-width="2" marker-end="url(#arrow)" />

            <!-- Arrow marker definition -->
            <defs>
                <marker id="arrow" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto" markerUnits="strokeWidth">
                    <path d="M0,0 L10,5 L0,10 L2,5 Z" fill="#fff" />
                </marker>
            </defs>
        </svg>
        <div class="caption">Figure 4.1 System Architecture Diagram</div>
    </div>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRM System Architecture</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/svg.js/3.1.2/svg.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #2d3748;
            margin-bottom: 30px;
            font-size: 2.5rem;
            font-weight: 700;
        }
        .subtitle {
            text-align: center;
            color: #718096;
            margin-bottom: 40px;
            font-size: 1.1rem;
        }
        #architecture-diagram {
            width: 100%;
            height: 800px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            background: #f7fafc;
        }
        .legend {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: #4a5568;
        }
        .legend-box {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }
        .download-section {
            text-align: center;
            margin-top: 30px;
        }
        .download-btn {
            background: #4299e1;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: background 0.3s;
        }
        .download-btn:hover {
            background: #3182ce;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üè¢ CRM System Architecture</h1>
        <p class="subtitle">Complete Full-Stack Architecture with Authentication, Email Integration & Real-time Features</p>
        
        <div id="architecture-diagram"></div>
        
        <div class="legend">
            <div class="legend-item">
                <div class="legend-box" style="background: #4299e1;"></div>
                <span>Frontend Layer</span>
            </div>
            <div class="legend-item">
                <div class="legend-box" style="background: #48bb78;"></div>
                <span>Backend API</span>
            </div>
            <div class="legend-item">
                <div class="legend-box" style="background: #ed8936;"></div>
                <span>Database</span>
            </div>
            <div class="legend-item">
                <div class="legend-box" style="background: #9f7aea;"></div>
                <span>External Services</span>
            </div>
            <div class="legend-item">
                <div class="legend-box" style="background: #f56565;"></div>
                <span>Authentication</span>
            </div>
            <div class="legend-item">
                <div class="legend-box" style="background: #38b2ac;"></div>
                <span>Real-time</span>
            </div>
        </div>

        <div class="download-section">
            <button class="download-btn" onclick="downloadSVG()">üì• Download Architecture Diagram</button>
        </div>
    </div>

    <script>
        // Create SVG canvas
        const draw = SVG().addTo('#architecture-diagram').size('100%', '100%');
        
        // Colors
        const colors = {
            frontend: '#4299e1',
            backend: '#48bb78',
            database: '#ed8936',
            external: '#9f7aea',
            auth: '#f56565',
            realtime: '#38b2ac',
            text: '#2d3748',
            border: '#e2e8f0'
        };

        // Helper function to create rounded rectangles
        function createBox(x, y, width, height, color, text, textSize = 12) {
            const group = draw.group();
            
            // Box
            group.rect(width, height)
                .attr({
                    x: x,
                    y: y,
                    rx: 8,
                    ry: 8,
                    fill: color,
                    stroke: '#ffffff',
                    'stroke-width': 2,
                    opacity: 0.9
                });
            
            // Text
            group.text(text)
                .attr({
                    x: x + width/2,
                    y: y + height/2,
                    'text-anchor': 'middle',
                    'dominant-baseline': 'central',
                    fill: 'white',
                    'font-size': textSize,
                    'font-weight': '600',
                    'font-family': 'Segoe UI, sans-serif'
                });
                
            return group;
        }

        // Helper function to create arrows
        function createArrow(x1, y1, x2, y2, color = '#718096', label = '') {
            const group = draw.group();
            
            // Line
            group.line(x1, y1, x2, y2)
                .attr({
                    stroke: color,
                    'stroke-width': 2,
                    'marker-end': 'url(#arrowhead)'
                });
                
            // Label
            if (label) {
                const midX = (x1 + x2) / 2;
                const midY = (y1 + y2) / 2;
                group.text(label)
                    .attr({
                        x: midX,
                        y: midY - 5,
                        'text-anchor': 'middle',
                        fill: color,
                        'font-size': 10,
                        'font-weight': '500'
                    });
            }
                
            return group;
        }

        // Create arrowhead marker
        const defs = draw.defs();
        const marker = defs.marker(10, 10, function(add) {
            add.path('M 0 0 L 10 5 L 0 10 z').fill('#718096');
        }).attr({
            id: 'arrowhead',
            refX: 9,
            refY: 5,
            markerUnits: 'strokeWidth',
            orient: 'auto'
        });

        // Title
        draw.text('CRM System Architecture')
            .attr({
                x: 700,
                y: 30,
                'text-anchor': 'middle',
                fill: colors.text,
                'font-size': 24,
                'font-weight': '700',
                'font-family': 'Segoe UI, sans-serif'
            });

        // CLIENT LAYER (Top)
        draw.text('CLIENT LAYER')
            .attr({
                x: 50,
                y: 80,
                fill: colors.text,
                'font-size': 14,
                'font-weight': '600'
            });

        // Browser
        createBox(50, 100, 200, 60, colors.frontend, 'Web Browser\\n(React + Vite)', 12);

        // Frontend Components
        createBox(300, 100, 150, 60, colors.frontend, 'Frontend\\nComponents', 11);
        createBox(480, 100, 120, 60, colors.frontend, 'Context API\\n(Auth/CRM)', 10);
        createBox(630, 100, 120, 60, colors.frontend, 'React Router\\n(Navigation)', 10);

        // MIDDLEWARE LAYER
        draw.text('MIDDLEWARE LAYER')
            .attr({
                x: 50,
                y: 210,
                fill: colors.text,
                'font-size': 14,
                'font-weight': '600'
            });

        // Auth Middleware
        createBox(50, 230, 150, 50, colors.auth, 'JWT Authentication\\nMiddleware', 10);
        createBox(230, 230, 120, 50, colors.auth, 'Admin\\nMiddleware', 10);
        createBox(380, 230, 120, 50, colors.backend, 'CORS\\nMiddleware', 10);

        // API LAYER
        draw.text('API LAYER')
            .attr({
                x: 50,
                y: 330,
                fill: colors.text,
                'font-size': 14,
                'font-weight': '600'
            });

        // Express Server
        createBox(50, 350, 180, 80, colors.backend, 'Express.js Server\\n(Node.js)', 12);

        // Controllers
        createBox(260, 350, 120, 35, colors.backend, 'Auth Controller', 10);
        createBox(260, 395, 120, 35, colors.backend, 'User Controller', 10);
        createBox(400, 350, 120, 35, colors.backend, 'Customer Controller', 10);
        createBox(400, 395, 120, 35, colors.backend, 'Project Controller', 10);
        createBox(540, 350, 120, 35, colors.backend, 'Task Controller', 10);
        createBox(540, 395, 120, 35, colors.backend, 'Activity Controller', 10);

        // Routes
        createBox(680, 350, 100, 80, colors.backend, 'API Routes\\n(/api/*)', 11);

        // BUSINESS LOGIC LAYER
        draw.text('BUSINESS LOGIC LAYER')
            .attr({
                x: 50,
                y: 480,
                fill: colors.text,
                'font-size': 14,
                'font-weight': '600'
            });

        // Models
        createBox(50, 500, 100, 35, colors.backend, 'User Model', 10);
        createBox(160, 500, 100, 35, colors.backend, 'Customer Model', 10);
        createBox(270, 500, 100, 35, colors.backend, 'Project Model', 10);
        createBox(380, 500, 100, 35, colors.backend, 'Task Model', 10);
        createBox(490, 500, 100, 35, colors.backend, 'Activity Model', 10);
        createBox(600, 500, 100, 35, colors.backend, 'Event Model', 10);

        // DATABASE LAYER
        draw.text('DATABASE LAYER')
            .attr({
                x: 50,
                y: 580,
                fill: colors.text,
                'font-size': 14,
                'font-weight': '600'
            });

        // MongoDB
        createBox(50, 600, 250, 60, colors.database, 'MongoDB Atlas\\n(Cloud Database)', 12);

        // Collections
        createBox(320, 600, 100, 30, colors.database, 'Users Collection', 9);
        createBox(430, 600, 100, 30, colors.database, 'Customers', 9);
        createBox(540, 600, 100, 30, colors.database, 'Projects', 9);
        createBox(650, 600, 100, 30, colors.database, 'Tasks', 9);
        createBox(320, 640, 100, 30, colors.database, 'Activities', 9);
        createBox(430, 640, 100, 30, colors.database, 'Events', 9);

        // EXTERNAL SERVICES
        draw.text('EXTERNAL SERVICES')
            .attr({
                x: 800,
                y: 200,
                fill: colors.text,
                'font-size': 14,
                'font-weight': '600'
            });

        // Email Service
        createBox(800, 220, 150, 50, colors.external, 'Email Service\\n(Nodemailer + Gmail)', 10);

        // Real-time Service
        createBox(800, 290, 150, 50, colors.external, 'Socket.IO\\n(Real-time)', 10);

        // AUTHENTICATION FLOW
        draw.text('AUTHENTICATION FLOW')
            .attr({
                x: 800,
                y: 380,
                fill: colors.text,
                'font-size': 14,
                'font-weight': '600'
            });

        createBox(800, 400, 150, 35, colors.auth, 'Login/Register', 10);
        createBox(800, 445, 150, 35, colors.auth, 'JWT Token Gen', 10);
        createBox(800, 490, 150, 35, colors.auth, 'Password Reset', 10);
        createBox(800, 535, 150, 35, colors.auth, 'OTP Verification', 10);

        // PASSWORD RESET FLOW
        draw.text('PASSWORD RESET FLOW')
            .attr({
                x: 980,
                y: 380,
                fill: colors.text,
                'font-size': 14,
                'font-weight': '600'
            });

        createBox(980, 400, 120, 30, colors.auth, '1. Enter Email', 9);
        createBox(980, 440, 120, 30, colors.auth, '2. Send OTP', 9);
        createBox(980, 480, 120, 30, colors.auth, '3. Verify OTP', 9);
        createBox(980, 520, 120, 30, colors.auth, '4. Reset Password', 9);

        // ARROWS - Data Flow
        // Frontend to Backend
        createArrow(250, 130, 260, 370, colors.frontend, 'HTTP/HTTPS');
        
        // Backend to Database
        createArrow(150, 430, 150, 600, colors.backend, 'Mongoose ODM');
        
        // Auth flow
        createArrow(730, 370, 800, 420, colors.auth, 'Auth Requests');
        
        // Email service
        createArrow(380, 370, 800, 250, colors.external, 'Send OTP/Reset Emails');
        
        // Socket.IO
        createArrow(590, 395, 800, 315, colors.realtime, 'Real-time Updates');

        // Models to Collections
        createArrow(100, 535, 370, 615, colors.database, '');
        createArrow(210, 535, 480, 615, colors.database, '');
        createArrow(320, 535, 590, 615, colors.database, '');
        createArrow(430, 535, 700, 615, colors.database, '');

        // Download function
        window.downloadSVG = function() {
            const svgElement = document.querySelector('#architecture-diagram svg');
            const svgData = new XMLSerializer().serializeToString(svgElement);
            const svgBlob = new Blob([svgData], {type: 'image/svg+xml;charset=utf-8'});
            const svgUrl = URL.createObjectURL(svgBlob);
            
            const downloadLink = document.createElement('a');
            downloadLink.href = svgUrl;
            downloadLink.download = 'crm-system-architecture.svg';
            document.body.appendChild(downloadLink);
            downloadLink.click();
            document.body.removeChild(downloadLink);
        };
    </script>
</body>
</html>
